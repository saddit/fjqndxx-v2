# é’å¹´å¤§å­¦ä¹ /å›¢è¯¾è‡ªåŠ¨æ‰“å¡

![](https://github.com/838239178/tk-auto-study/workflows/auto-study/badge.svg) ![](https://img.shields.io/github/stars/838239178/tk-auto-study) ![](https://img.shields.io/github/forks/838239178/tk-auto-study) ![](https://img.shields.io/badge/Python-3.7+-green.svg)

[æ­¤å¤„å±•ç¤ºé‡è¦æ›´æ–°æ—¥å¿—ï¼Œå®Œæ•´æ—¥å¿—æ“è¿™é‡Œ](./doc/Log.md)

> **2021.09.28**ï¼š:warning: **[é‡è¦æ›´æ–°]** ä¿®å¤ç™»å½•å¼‚å¸¸é—®é¢˜ æ›´æ¢äº† **å¯†é’¥(pubKey)** å’ŒåŠ å¯†æ–¹æ³• è¯·åŠ¡å¿…forkæ­¤æœ€æ–°ç‰ˆæœ¬å¹¶æ›´æ¢é…ç½®æ–‡ä»¶çš„publicæˆ–github_secretçš„pub_keyï¼
> 
> 2021.10.02: æ–°å¢æ¶ˆæ¯æ¨é€åŠŸèƒ½â€”â€”å¾®ä¿¡Serveré…±

ğŸ¤ºå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å›¢è¯¾æ²¡çœ‹è¢«å›¢æ”¯ä¹¦èµ¶ç€å‚¬äº†

### ç‚¹ä¸ª:star:å†èµ°å§,â¤æ„Ÿè°¢å¤§å®¶çš„Starå’ŒFork,æœ‰é—®é¢˜å¯ä»¥å‘issue

**ä»…ä¾›ç¦å»ºå…±é’å›¢å›¢å‘˜å­¦ä¹ äº¤æµä½¿ç”¨** 

**æµ™æ±Ÿå›¢å‘˜å¯ä»¥ç‚¹å‡»è¿™é‡Œ[é’æ˜¥æµ™æ±Ÿ](https://gist.github.com/838239178/ddad90e8c5e52f5fa8f0febea6109f24)**

### å‚ä¸è´¡çŒ®ï¼

:pen:å¦‚æœä½ æœ‰æ–°çš„æˆ–æ›´å¥½OCRè¯†åˆ«æ–¹å¼ è¯·å‚è€ƒ [OCRè´¡çŒ®æ–‡æ¡£](./doc/OCR_Module_Rule.md) åšå‡ºä½ çš„è´¡çŒ®ï¼

:pen: å¦‚æœä½ æœ‰æ–°çš„æˆ–æ›´å¥½æ¶ˆæ¯æ¨é€æ–¹å¼ è¯·å‚è€ƒ [æ¶ˆæ¯æ¨é€è´¡çŒ®æ–‡æ¡£](./doc/send_module_rule.md) åšå‡ºä½ çš„è´¡çŒ®ï¼

## ä½¿ç”¨æ–¹æ³•

#### ğŸpub_key:

```
A7E74D2B6282AEB1C5EA3C28D25660A7
```

#### 0. ç”³è¯·Ocrè¯†åˆ«æ¥å£çš„æƒé™

[è¯¦ç»†æ•™ç¨‹è¯·ç‚¹å‡»è¿™é‡Œ](https://blog.pressed.top/2021/02/14/signUpBaiduOcr/)

*è¯·é€‰æ‹©ä½¿ç”¨ä¸€ç§å¯ä»¥è¯†åˆ«æ–‡å­—çš„apiï¼Œå»ºè®®ä½¿ç”¨BaiduAIçš„Ocræ¥å£ï¼Œå¦åˆ™éœ€è¦è‡ªè¡Œä¿®æ”¹ä»£ç *

- é¦–å…ˆè¦æœ‰ä¸€ä¸ªç™¾åº¦è´¦å·ï¼Œè¿›å…¥[è¿™ä¸ªç½‘å€](https://ai.baidu.com/)ï¼Œç‚¹å‡»æ§åˆ¶å°å¹¶ç™»å½•
- å®Œæˆä¸ªäººå®åè®¤è¯ï¼Œç”³è¯·æ–‡å­—è¯†åˆ«çš„ä½¿ç”¨æƒ
- ç‚¹å‡»ç®¡ç†åº”ç”¨ï¼Œç‚¹å‡»åˆ›å»ºåº”ç”¨ï¼ŒæŒ‰è¦æ±‚å¡«ä¸€äº›ä¿¡æ¯ï¼Œåˆ›å»ºå®Œæˆåè®°ä½**API KEY**å’Œ**SECRET KEY**

#### 1. éƒ¨ç½²åœ¨å¹³å°ä¸Šå®šæ—¶æ‰§è¡Œ

å¯ä»¥æ˜¯æœåŠ¡å™¨ï¼Œæœ¬åœ°ï¼Œå’ŒGitHubActionsï¼Œè¿™é‡Œåªä»‹ç»å¦‚ä½•åœ¨GitHubActionsä¸­è¿è¡Œï¼Œå…¶ä»–è¿è¡Œæ–¹å¼è¯·å‚è€ƒmain.pyä¸­çš„æ³¨é‡Š

- forkè¯¥é¡¹ç›®åˆ°ä½ çš„åº“ä¸­

- æ·»åŠ äº”ä¸ªsecretsï¼Œåˆ†åˆ«ä¸ºï¼šusername,  pwd,  pub_key,  ocr_api_key,  ocr_secret_key

- **å°†.github/workflows/run.ymlä¸­çš„æ³¨é‡Šéƒ¨åˆ†(`#`å·)å–æ¶ˆ**å¹¶cronä¸ºä½ æƒ³è¦è§¦å‘çš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯æ¯å‘¨ä¸‰14ç‚¹è¿è¡Œä¸€æ¬¡ï¼Œcronå¦‚ä½•å†™è¯·è‡ªè¡Œç™¾åº¦
- è¿›å…¥Actionä¸­æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸ

## å¯é€‰è¯†åˆ«ç±»å‹

GithubActionï¼ˆå¯é€‰ï¼‰æ·»åŠ æ–°çš„secrets OCR_TYPE æ¥æŒ‡å®šè¯†åˆ«ç±»å‹

å…¶ä»–æ–¹å¼åœ¨config.jsonä¸­ä¿®æ”¹æŒ‡å®šé…ç½®é¡¹å³å¯

- baidu_image [é»˜è®¤æ–¹æ³•,éœ€è¦åˆ°ç™¾åº¦AIä¸­ç”³è¯·](https://blog.pressed.top/2021/02/14/signUpBaiduOcr/)

## å¯é€‰æ¶ˆæ¯æ¨é€

> ä»… `1.2.2` ç‰ˆæœ¬åŠä»¥ä¸Šå¯ç”¨

ä½¿ç”¨æ¶ˆæ¯æ¨é€ å¦‚å¾®ä¿¡æ¨é€ã€QQæ¨é€

### é…ç½®

GithubActionç”¨æˆ·å¯é€šè¿‡æ·»åŠ secretsï¼šsend_type, send_key, send_mode æ¥ä½¿ç”¨æ¶ˆæ¯æ¨é€

æ™®é€šç”¨æˆ·å¯æŸ¥çœ‹æœ€æ–°çš„ `config.json.bak` æµè§ˆæ–°é…ç½®é¡¹

**é…ç½®é¡¹è§£è¯»**

| é…ç½®é¡¹    | è¯´æ˜                                                         | å¯é€‰å€¼                                        |
| --------- | ------------------------------------------------------------ | --------------------------------------------- |
| send_type | æ¶ˆæ¯æ¨é€ç±»å‹ **ä¸å¡«å†™åˆ™ä¸æ¨é€**                              | [server_chan](./doc/send_help/server_chan.md) |
| send_key  | æ¶ˆæ¯æ¨é€æœåŠ¡çš„å¯†é’¥ åœ¨æ¨é€æœåŠ¡çš„å®˜ç½‘æ³¨å†Œè·å¾—                  |                                               |
| send_mode | æ¨é€æ¨¡å¼ æ‰“å¡å¤±è´¥æ—¶æ¨é€(fail) æ‰“å¡æˆåŠŸæ—¶æ¨é€(success) æ— è®ºæˆåŠŸä¸å¦éƒ½æ¨é€(both) **é»˜è®¤å¤±è´¥æ—¶æ¨é€** | fail success both                             |

## å¤šäººæ‰“å¡

> ä»…æ”¯æŒ `1.2.3` ä»¥ä¸Šç‰ˆæœ¬

é…ç½®å¤šä¸ªè´¦å·ä¸€èµ·æ‰“å¡

1. åœ¨ `Github Action` ä¸Šé…ç½®

    æ·»åŠ æ–°secrets `EXT_USERS`, æŒ‰ä»¥ä¸‹æ ¼å¼å¡«å†™è´¦å·ï¼š
    
    ```text
   æ‰‹æœºå·1 å¯†ç 1
   æ‰‹æœºå·2 å¯†ç 2
    ```
   
   åŸå…ˆé…ç½®çš„secretsä¸éœ€è¦æ”¹åŠ¨

2. åœ¨æœ¬åœ° `config.json` ä¸Šé…ç½®

   å‚è€ƒ [config.json.bak](./config.json.bak) çš„å†…å®¹æ·»åŠ æ–°çš„é…ç½®ï¼ŒåŸé…ç½®ä¸éœ€è¦æ”¹åŠ¨

## èµæˆ‘ä¸€æ¯Coffee

![qq_pic_merged_1633171137809](https://cdn.jsdelivr.net/gh/838239178/PicgoBed/img/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f3833383233393137382f506963676f4265642f696d672f313633333137313136342e6a7067.jpg)![qq_pic_merged_1633171137809](https://cdn.jsdelivr.net/gh/838239178/PicgoBed/img/qq_pic_merged_1633171137809.jpg)


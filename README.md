# é’å¹´å¤§å­¦ä¹ /å›¢è¯¾è‡ªåŠ¨æ‰“å¡

![](https://github.com/838239178/tk-auto-study/workflows/auto-study/badge.svg) ![](https://img.shields.io/github/stars/838239178/tk-auto-study) ![](https://img.shields.io/github/forks/838239178/tk-auto-study) ![](https://img.shields.io/badge/Python-3.7-green.svg)

[æ­¤å¤„å±•ç¤ºæœ€è¿‘æ›´æ–°æ—¥å¿—ï¼Œå®Œæ•´æ—¥å¿—æ“è¿™é‡Œ](./doc/Log.md)

> **2022.03.06**: :warning: **[é‡è¦æ›´æ–°]** æ–°å­¦æœŸæ–°æ°”è±¡ï¼ŒGithubActionå·²ç»å¯ç”¨ä½¿ç”¨äº†ï¼ï¼æ–°å¢Barkæ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ˆbeta) 
>
> 2022.03.11: ç»ç”¨æˆ·åé¦ˆï¼Œå»é™¤äº†OCRåŠŸèƒ½æ¨¡å—ï¼Œç°åœ¨ä¸éœ€è¦ç”³è¯·OCRè´¦å·ï¼Œæ·»åŠ äº†æ›´å¤šä»£ç†æº æ”¹å–„ä»£ç†å¼‚å¸¸çš„å¤„ç† æé«˜å¯ç”¨æ€§
>
> 2022.03.26: æ„Ÿè°¢ @miscdec å¯¹å¼€æºåº“çš„è´¡çŒ®ï¼Œç°åœ¨æ·»åŠ äº†push_plusæ¨é€æ¸ é“ï¼Œå¹¶ä¿®å¤äº†ä¸€äº›å¼‚å¸¸ã€‚
>
> 2022.03.27: ä»£ç†æ± æä¸ç¨³å®š
>
> 2022.03.30: æ„Ÿè°¢ @Dark-Existed è´¡çŒ®äº†Dockeréƒ¨ç½²è„šæœ¬ï¼Œè¯·ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®ç›¸å…³å‚æ•°

ğŸ¤ºå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å›¢è¯¾æ²¡çœ‹è¢«å›¢æ”¯ä¹¦èµ¶ç€å‚¬äº†

### ç‚¹ä¸ª:star:å†èµ°å§,â¤æ„Ÿè°¢å¤§å®¶çš„Starå’ŒFork,æœ‰é—®é¢˜å¯ä»¥å‘issue

**ä»…ä¾›ç¦å»ºå…±é’å›¢å›¢å‘˜å­¦ä¹ äº¤æµä½¿ç”¨** 

~~æµ™æ±Ÿå›¢å‘˜å¯ä»¥ç‚¹å‡»è¿™é‡Œ[é’æ˜¥æµ™æ±Ÿ](https://gist.github.com/838239178/ddad90e8c5e52f5fa8f0febea6109f24)~~

### å‚ä¸è´¡çŒ®ï¼

:pen: å¦‚æœä½ æœ‰æ–°çš„æˆ–æ›´å¥½æ¶ˆæ¯æ¨é€æ–¹å¼ è¯·å‚è€ƒ [æ¶ˆæ¯æ¨é€è´¡çŒ®æ–‡æ¡£](./doc/send_module_rule.md) åšå‡ºä½ çš„è´¡çŒ®ï¼

## ä½¿ç”¨æ–¹æ³•

#### ğŸpub_key:

```
A7E74D2B6282AEB1C5EA3C28D25660A7
```

#### éƒ¨ç½²åœ¨å¹³å°ä¸Šå®šæ—¶æ‰§è¡Œ

è¿™é‡Œä»‹ç»å¦‚ä½•åœ¨GitHubActionsä¸­è¿è¡Œï¼Œå› ä»£ç†IPçš„ç›¸å…³ä»£ç ï¼Œéœ€ç¡®ä¿**Python3.9**åŠä»¥ä¸Šç‰ˆæœ¬ã€‚

- forkè¯¥é¡¹ç›®åˆ°ä½ çš„åº“ä¸­

- æ·»åŠ ä¸‰ä¸ªsecretsï¼Œåˆ†åˆ«ä¸ºï¼šusername,  pwd,  pub_key

- å°†[è¯¥æ–‡ä»¶](./.github/workflows/run.yml)ä¸­çš„`#`åˆ é™¤å¹¶ä¿®æ”¹cronä¸ºä½ æƒ³è¦è§¦å‘çš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯æ¯å‘¨ä¸‰14ç‚¹è¿è¡Œä¸€æ¬¡ï¼Œcronå¦‚ä½•å†™è¯·è‡ªè¡Œç™¾åº¦
 
  ![image](https://user-images.githubusercontent.com/55338151/161259594-21812419-25e3-4b1f-b64f-e06b826351b8.png)

- è¿›å…¥ Actions ä¸­æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ï¼ˆç‚¹å‡»auto-study å³è¾¹ Run workflow)ï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸ
  
  ![image](https://user-images.githubusercontent.com/55338151/161258385-eccd7f2f-8b7e-4002-aa8b-c436e96c01d7.png)

> `1.2.8` ç‰ˆæœ¬ä»¥ä¸Šå¯ä»¥ä½¿ç”¨Dockerè„šæœ¬è¿è¡Œï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®å‚æ•°ï¼ˆæ ¼å¼åŒActions)ï¼Œå¯èƒ½æ— æ³•é…ç½®å¤šäººæ‰“å¡ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨`\n`æ¢è¡Œç¬¦ï¼ˆæœªæµ‹è¯•ï¼‰

### å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²

åœ¨æœ¬åœ°æˆ–è€…å›½å†…æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸éœ€è¦ä»£ç†ï¼Œå¯å…¼å®¹**Python3.7**ç‰ˆæœ¬

#### crontab

å…‹éš†é¡¹ç›®å¹¶æ›´æ”¹é…ç½®æ–‡ä»¶åç§°

```shell
git clone https://github.com/838239178/tk-auto-study.git && \
cd tk-auto-study && \
mv config.json.bak config.json
```

æŒ‰ç…§è¦æ±‚å¡«å†™é…ç½®æ–‡ä»¶

```shell
vi config.json
```

ä¿®æ”¹ crontab

```shell
crontab -e
# å°†ä¸‹é¢è¿™è¡Œå¤åˆ¶åˆ°é‡Œé¢ï¼Œcdçš„è·¯å¾„æŒ‰ç…§éœ€è¦æ›´æ”¹
00 08 * * 3 cd /root/tk-auto-study && python3 main.py >> crontab.log 2>&1
# æˆ–è€…
00 08 * * python3 /root/tk-auto-study/main.py >> crontab.log 2>&1
```

ä½¿ç”¨ `crontab -l` æŸ¥çœ‹æ˜¯å¦ä¿®æ”¹æˆåŠŸ

#### docker

é™¤äº†crontabä¹Ÿå¯ä»¥ä½¿ç”¨ç›®å½•ä¸‹çš„`docker-compose.yml`ï¼Œä¸éœ€è¦å¡«å†™ `config.json` ä½†éœ€è¦ä¿®æ”¹æ–‡ä»¶å†…çš„`environments`

```shell
docker-compose up -d
```

## å¯é€‰æ¶ˆæ¯æ¨é€

> ä»… `1.2.2` ç‰ˆæœ¬åŠä»¥ä¸Šå¯ç”¨

ä½¿ç”¨æ¶ˆæ¯æ¨é€ å¦‚å¾®ä¿¡æ¨é€ã€QQæ¨é€

### é…ç½®

GithubActionç”¨æˆ·å¯é€šè¿‡æ·»åŠ secretsï¼šsend_type, send_key, send_mode æ¥ä½¿ç”¨æ¶ˆæ¯æ¨é€

æ™®é€šç”¨æˆ·å¯æŸ¥çœ‹æœ€æ–°çš„ `config.json.bak` æµè§ˆæ–°é…ç½®é¡¹

**é…ç½®é¡¹è§£è¯»**

| é…ç½®é¡¹    | è¯´æ˜                                                         | å¯é€‰å€¼                                        |
| --------- | ------------------------------------------------------------ | --------------------------------------------- |
| send_type | æ¶ˆæ¯æ¨é€ç±»å‹ **ä¸å¡«å†™åˆ™ä¸æ¨é€**                              | [server_chan](./doc/send_help/server_chan.md) [bark(Beta)](./doc/send_help/bark.md) [push_plus](./doc/send_help/push_plus.md) |
| send_key  | æ¶ˆæ¯æ¨é€æœåŠ¡çš„å¯†é’¥ åœ¨æ¨é€æœåŠ¡çš„å®˜ç½‘æ³¨å†Œè·å¾—                  |                                               |
| send_mode | æ¨é€æ¨¡å¼ æ‰“å¡å¤±è´¥æ—¶æ¨é€(fail) æ‰“å¡æˆåŠŸæ—¶æ¨é€(success) æ— è®ºæˆåŠŸä¸å¦éƒ½æ¨é€(both) **é»˜è®¤å¤±è´¥æ—¶æ¨é€** | fail success both                             |

## å¤šäººæ‰“å¡

> ä»…æ”¯æŒ `1.2.3` ä»¥ä¸Šç‰ˆæœ¬

é…ç½®å¤šä¸ªè´¦å·ä¸€èµ·æ‰“å¡

1. åœ¨ `Github Action` ä¸Šé…ç½®

    æ·»åŠ æ–°secrets `EXT_USERS`, æŒ‰ä»¥ä¸‹æ ¼å¼å¡«å†™è´¦å·ï¼š
    
    ```text
   æ‰‹æœºå·1 å¯†ç 1
   æ‰‹æœºå·2 å¯†ç 2
   ```
   
   åŸå…ˆé…ç½®çš„secretsä¸éœ€è¦æ”¹åŠ¨ï¼Œå»ºè®®è‡ªå·±ä¿å­˜å¥½å¤šäººçš„è´¦å·å¯†ç ï¼Œä»¥ä¾¿ä»¥åå¢åŠ æˆ–åˆ é™¤è´¦å·

2. åœ¨æœ¬åœ° `config.json` ä¸Šé…ç½®

   å‚è€ƒ [config.json.bak](./config.json.bak) çš„å†…å®¹æ·»åŠ æ–°çš„é…ç½®ï¼ŒåŸé…ç½®ä¸éœ€è¦æ”¹åŠ¨

## Stargazers over time

[![Stargazers over time](https://starchart.cc/838239178/tk-auto-study.svg)](https://starchart.cc/838239178/tk-auto-study)

## èµæˆ‘ä¸€æ¯Coffee

![qq_pic_merged_1633171137809](https://cdn.jsdelivr.net/gh/838239178/PicgoBed/img/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f3833383233393137382f506963676f4265642f696d672f313633333137313136342e6a7067.jpg)![qq_pic_merged_1633171137809](https://cdn.jsdelivr.net/gh/838239178/PicgoBed/img/qq_pic_merged_1633171137809.jpg)

